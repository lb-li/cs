import{_ as e,m as t,s as a,b as c,r as l,c as o,w as s,i,o as n,e as u,d,F as r,f as h,g as m,t as p,j as k}from"./index-CXYRgNF1.js";const f=e({data:()=>({cartList:[{id:1,title:"2023新款时尚连衣裙女夏季薄款气质显瘦中长款裙子",price:129,image:"https://via.placeholder.com/300x300?text=Product1",sku:"红色，M",quantity:1,stock:10,checked:!0},{id:2,title:"男士短袖T恤夏季新款潮流宽松半袖体恤衫",price:69.9,image:"https://via.placeholder.com/300x300?text=Product2",sku:"黑色，XL",quantity:2,stock:5,checked:!0}],allChecked:!0}),computed:{totalPrice(){return this.cartList.filter((e=>e.checked)).reduce(((e,t)=>e+t.price*t.quantity),0)},checkedCount(){return this.cartList.filter((e=>e.checked)).length}},onShow(){this.$common.isUserLoggedIn()||this.$common.checkNeedLogin()},methods:{updateItemCheck(e){this.updateAllChecked()},updateItemQuantity(e){console.log("更新商品数量",this.cartList[e])},removeItem(e){t({title:"提示",content:"确定要删除这个商品吗？",success:t=>{t.confirm&&(this.cartList.splice(e,1),this.updateAllChecked(),this.$refs.uToast.show({title:"删除成功",type:"success"}))}})},toggleAllCheck(){this.cartList.forEach((e=>{e.checked=this.allChecked}))},updateAllChecked(){this.allChecked=this.cartList.length>0&&this.cartList.every((e=>e.checked))},checkout(){0!==this.checkedCount?this.$common.isUserLoggedIn()?a({title:"结算功能开发中",icon:"none"}):this.$common.checkNeedLogin():this.$refs.uToast.show({title:"请选择要结算的商品",type:"warning"})},goShopping(){c({url:"/pages/index/index"})}}},[["render",function(e,t,a,c,f,g){const C=l("u-checkbox"),_=i,x=l("u-image"),y=l("u-number-box"),L=l("u-icon"),V=k,b=l("u-button"),v=l("u-empty"),I=l("u-toast");return n(),o(_,{class:"container"},{default:s((()=>[f.cartList.length>0?(n(),u(r,{key:0},[d(_,{class:"cart-list"},{default:s((()=>[(n(!0),u(r,null,h(f.cartList,((t,a)=>(n(),o(_,{class:"cart-item",key:a},{default:s((()=>[d(_,{class:"checkbox"},{default:s((()=>[d(C,{modelValue:t.checked,"onUpdate:modelValue":e=>t.checked=e,onChange:e=>g.updateItemCheck(a),shape:"circle",activeColor:"#fa3534"},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024),d(_,{class:"item-image"},{default:s((()=>[d(x,{src:t.image,width:"160rpx",height:"160rpx",mode:"aspectFill"},null,8,["src"])])),_:2},1024),d(_,{class:"item-content"},{default:s((()=>[d(_,{class:"item-title u-line-2"},{default:s((()=>[m(p(t.title),1)])),_:2},1024),d(_,{class:"item-sku"},{default:s((()=>[m(p(t.sku),1)])),_:2},1024),d(_,{class:"item-bottom"},{default:s((()=>[d(_,{class:"item-price"},{default:s((()=>[m(p(e.$common.formatPrice(t.price)),1)])),_:2},1024),d(y,{modelValue:t.quantity,"onUpdate:modelValue":e=>t.quantity=e,min:1,max:t.stock,onChange:e=>g.updateItemQuantity(a)},null,8,["modelValue","onUpdate:modelValue","max","onChange"])])),_:2},1024)])),_:2},1024),d(_,{class:"item-delete",onClick:e=>g.removeItem(a)},{default:s((()=>[d(L,{name:"trash",color:"#999",size:"40rpx"})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1}),d(_,{class:"cart-footer"},{default:s((()=>[d(_,{class:"footer-checkbox"},{default:s((()=>[d(C,{modelValue:f.allChecked,"onUpdate:modelValue":t[0]||(t[0]=e=>f.allChecked=e),onChange:g.toggleAllCheck,shape:"circle",activeColor:"#fa3534"},null,8,["modelValue","onChange"]),d(V,null,{default:s((()=>[m("全选")])),_:1})])),_:1}),d(_,{class:"footer-price"},{default:s((()=>[d(V,null,{default:s((()=>[m("合计：")])),_:1}),d(V,{class:"total-price"},{default:s((()=>[m(p(e.$common.formatPrice(g.totalPrice)),1)])),_:1})])),_:1}),d(_,{class:"footer-button",onClick:g.checkout},{default:s((()=>[m(" 结算("+p(g.checkedCount)+") ",1)])),_:1},8,["onClick"])])),_:1})],64)):(n(),o(_,{key:1,class:"empty-cart"},{default:s((()=>[d(v,{mode:"cart",icon:"http://cdn.uviewui.com/uview/empty/car.png"},{default:s((()=>[d(b,{slot:"bottom",type:"primary",text:"去逛逛",onClick:g.goShopping},null,8,["onClick"])])),_:1})])),_:1})),d(I,{ref:"uToast"},null,512)])),_:1})}],["__scopeId","data-v-96337198"]]);export{f as default};
