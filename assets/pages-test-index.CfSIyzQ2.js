import{_ as s,c as t,w as e,i as a,o,d,g as i,t as l,e as n,f as p,F as g,j as c,k as r}from"./index-CXYRgNF1.js";const u=s({data:()=>({isInApp:!1,currentUrl:"",logs:[]}),onLoad(){this.currentUrl=window.location.href,this.isInApp=window.AppBridge&&window.AppBridge.isInApp,this.addLog(`页面加载完成，是否在 App 中: ${this.isInApp}`),window.AppBridge?this.addLog("AppBridge 已加载"):this.addLog("AppBridge 未加载")},methods:{addLog(s){this.logs.push(`[${(new Date).toLocaleTimeString()}] ${s}`),console.log(s)},clearLogs(){this.logs=[],this.addLog("日志已清除")},testSendMessage(){if(this.addLog("发送测试消息"),window.AppBridge){const s=window.AppBridge.postMessageToApp({type:"test",data:{message:"这是一条测试消息",time:(new Date).toISOString()}});this.addLog("消息发送"+(s?"成功":"失败"))}else this.addLog("AppBridge 未加载，无法发送消息")},testRequestLogin(){if(this.addLog("请求登录"),window.AppBridge){const s=window.AppBridge.requestLogin();this.addLog("登录请求"+(s?"已发送":"发送失败"))}else this.addLog("AppBridge 未加载，无法请求登录")},testCustomMessage(){if(this.addLog("发送自定义消息"),window.AppBridge){const s=window.AppBridge.postMessageToApp({type:"custom",action:"showToast",data:{title:"来自H5的消息",duration:2e3}});this.addLog("自定义消息"+(s?"已发送":"发送失败"))}else this.addLog("AppBridge 未加载，无法发送自定义消息")}}},[["render",function(s,u,f,w,A,h){const L=a,_=c,B=r;return o(),t(L,{class:"container"},{default:e((()=>[d(L,{class:"title"},{default:e((()=>[i("App 通信测试页面")])),_:1}),d(L,{class:"info-box"},{default:e((()=>[d(L,{class:"info-item"},{default:e((()=>[d(_,null,{default:e((()=>[i("是否在 App 中运行:")])),_:1}),d(_,{class:"value"},{default:e((()=>[i(l(A.isInApp?"是":"否"),1)])),_:1})])),_:1}),d(L,{class:"info-item"},{default:e((()=>[d(_,null,{default:e((()=>[i("当前 URL:")])),_:1}),d(_,{class:"value"},{default:e((()=>[i(l(A.currentUrl),1)])),_:1})])),_:1})])),_:1}),d(L,{class:"btn-group"},{default:e((()=>[d(B,{class:"btn",onClick:h.testSendMessage},{default:e((()=>[i("发送测试消息")])),_:1},8,["onClick"]),d(B,{class:"btn",onClick:h.testRequestLogin},{default:e((()=>[i("请求登录")])),_:1},8,["onClick"])])),_:1}),d(L,{class:"btn-group"},{default:e((()=>[d(B,{class:"btn",onClick:h.testCustomMessage},{default:e((()=>[i("发送自定义消息")])),_:1},8,["onClick"]),d(B,{class:"btn",onClick:h.clearLogs},{default:e((()=>[i("清除日志")])),_:1},8,["onClick"])])),_:1}),d(L,{class:"log-box"},{default:e((()=>[d(L,{class:"log-title"},{default:e((()=>[i("日志输出:")])),_:1}),d(L,{class:"log-content"},{default:e((()=>[(o(!0),n(g,null,p(A.logs,((s,a)=>(o(),t(L,{key:a,class:"log-item"},{default:e((()=>[i(l(s),1)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-2290a37c"]]);export{u as default};
